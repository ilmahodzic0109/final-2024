<div class="container mt-3">
  <div>
    <table class="table table-striped" id="foods-report">
      <thead>
        <tr>
          <th>Name</th>
          <th>Brand</th>
          <th>Image</th>
          <th>Energy</th>
          <th>Protein</th>
          <th>Fat</th>
          <th>Fiber</th>
          <th>Carbs</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Milk</td>
          <td>Meggle</td>
          <td class="text-center">
            <img src="https://picsum.photos/200" height="50" />
          </td>
          <td>100</td>
          <td>99</td>
          <td>98</td>
          <td>97</td>
          <td>96</td>
        </tr>
        <tr>
          <td>Pasteta</td>
          <td>Argeta</td>
          <td class="text-center">
            <img src="https://picsum.photos/200" height="50" />
          </td>
          <td>100</td>
          <td>99</td>
          <td>98</td>
          <td>97</td>
          <td>96</td>
        </tr>
        <tr>
          <td>Kokice</td>
          <td>Bosna</td>
          <td class="text-center">
            <img src="https://picsum.photos/200" height="50" />
          </td>
          <td>100</td>
          <td>99</td>
          <td>98</td>
          <td>97</td>
          <td>96</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
<script>
  $(document).ready(function() {
    // Perform GET request when the document is ready
    $.ajax({
        url: '/../final-2024/backend/rest/foods/report',  // Replace with your actual API endpoint
        method: 'GET',
        dataType: 'json',
        success: function(response) {
            console.log('GET Request Successful:', response);
            // Call function to render data on success
            renderData(response);
        },
        error: function(xhr, status, error) {
            console.error('Error making GET request:', error);
            // Handle errors here
        }
    });
});

// Function to render data received from Ajax response
function renderData(data) {
    // Example: Rendering data in a table format
    var html = '<table class="table"><thead><tr><th>Name</th><th>Brand</th><th>Image</th><th>Energy</th><th>Protein</th><th>Fat</th><th>Fiber</th><th>Carbs</th></tr></thead><tbody>';

    // Loop through each item in the data array and create table rows
    data.forEach(function(item) {
        html += '<tr>';
        html += '<td>' + item.name + '</td>';
        html += '<td>' + item.brand + '</td>';
        html += '<td>' + item.image_url + '</td>';
        html += '<td>' + item.energy + '</td>';
        html += '<td>' + item.protein + '</td>';
        html += '<td>' + item.fat + '</td>';
        html += '<td>' + item.fiber + '</td>';
        html += '<td>' + item.carbs + '</td>';
        html += '</tr>';
    });

    html += '</tbody></table>';

    // Append the generated HTML to the dataContainer div
    $('#foods-report').html(html);
}
</script>
